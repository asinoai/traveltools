<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîì Install Bookmarklets</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Helvetica, Arial, sans-serif;
        background: #f8f9fa;
        padding: 20px 40px;
        color: #212529;
        line-height: 1.6;
        margin: 0;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
      }
      .header {
        text-align: center;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 20px;
        margin-bottom: 40px;
      }
      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }
      .instructions {
        max-width: 700px;
        margin: 30px auto;
        background: #e9ecef;
        padding: 25px;
        border-radius: 8px;
        border: 1px solid #ced4da;
        text-align: center;
        font-size: 1.1rem;
      }
      .bookmarklet-card {
        margin: 25px 0;
        padding: 25px;
        background: #ffffff;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        transition: transform 0.2s ease-in-out;
      }
      .bookmarklet-card:hover {
        transform: translateY(-5px);
      }
      .bookmarklet-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 0;
        color: #0056b3;
      }
      .bookmarklet-description {
        margin-bottom: 25px;
        color: #495057;
        font-size: 1rem;
      }
      .bookmarklet-button {
        display: inline-block;
        padding: 14px 24px;
        font-size: 1rem;
        font-weight: bold;
        background: linear-gradient(145deg, #007bff, #0056b3);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.25);
        transition: all 0.2s ease;
        cursor: move; /* Indicates the item is draggable */
      }
      .bookmarklet-button:hover {
        background: linear-gradient(145deg, #0069d9, #004a99);
        box-shadow: 0 6px 12px rgba(0, 123, 255, 0.35);
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Install Bookmarklets</h1>
        <p>A collection of powerful tools for your browser.</p>
      </div>

      <div class="instructions">
        <strong>How to Install:</strong> Simply
        <b>drag and drop</b> the blue buttons below directly onto your
        browser's bookmarks bar.
      </div>

      <!-- Sumo CSV Export -->
      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title">üì• Sumo CSV Export</h2>
        <p class="bookmarklet-description">
          Click this bookmarklet on a Sumo Logic search page to instantly
          compile and download all data from the currently loaded pages into a
          single CSV file. Perfect for offline analysis, reporting, or sharing with your team.
        </p>
        <a class="bookmarklet-button" href="javascript:(async function()%7Bfunction%20decode(encoded)%7Bconst%20salt%3D'initFields'%3Bconst%20textToChars%3Dtext%3D%3Etext.split(''%29.map(c%3D%3Ec.charCodeAt(0))%3Bconst%20applySaltToChar%3Dcode%3D%3EtextToChars(salt).reduce((a%2Cb)%3D%3Ea%5Eb%2Ccode)%3Breturn%20encoded.match(/.%7B1%2C2%7D/g).map(hex%3D%3EparseInt(hex%2C16)).map(applySaltToChar).map(charCode%3D%3EString.fromCharCode(charCode)).join('')%7Dfunction%20isValidJSON(str)%7Btry%7Bconst%20parsed%3DJSON.parse(str)%3Breturn%20typeof%20parsed%3D%3D%3D'object'%26%26parsed!%3D%3Dnull%7Dcatch%7Breturn%20false%7D%7Dasync%20function%20waitForPageChange(prevSnapshot%2CrootDiv%2Ctimeout%3D5000)%7Bconst%20start%3DDate.now()%3Bwhile(Date.now()-start%3Ctimeout)%7Bconst%20currentSnapshot%3DrootDiv.innerText%3Bif(currentSnapshot!%3D%3DprevSnapshot)return%3Bawait%20new%20Promise(resolve%3D%3EsetTimeout(resolve%2C200))%7Dthrow%20new%20Error('Timeout%20waiting%20for%20page%20to%20change.')%7Dfunction%20waitForDomToSettle(targetNode%2CsettleTime%3D500%2CmaxWaitTime%3D5000)%7Breturn%20new%20Promise(resolve%3D%3E%7Blet%20timeout%3Bconst%20observer%3Dnew%20MutationObserver(()%3D%3E%7BclearTimeout(timeout)%3Btimeout%3DsetTimeout(()%3D%3E%7Bobserver.disconnect()%3Bresolve()%7D%2CsettleTime)%7D)%3Bobserver.observe(targetNode%2C%7BchildList%3Atrue%2Csubtree%3Atrue%2Cattributes%3Atrue%7D)%3BsetTimeout(()%3D%3E%7Bobserver.disconnect()%3Bresolve()%7D%2CmaxWaitTime)%7D)%7Dasync%20function%20collectPageData(rootDiv)%7Bconst%20cellDivs%3DrootDiv.querySelectorAll('div%5Bdata-cell-root%3D%22true%22%5D.cellContent___1IkPa.textRow___2UrUm')%3Bconst%20result%3D%5B%5D%3BcellDivs.forEach(div%3D%3E%7Bconst%20text%3Ddiv.textContent.trim()%3Btry%7Bconst%20decoded%3Ddecode(text)%3Bif(isValidJSON(decoded))%7Bresult.push(decoded)%7Delse%7Bresult.push(text)%7D%7Dcatch%7Bresult.push(text)%7D%7D)%3Breturn%20result%7Dasync%20function%20collectAllPagesData()%7Bconst%20rootDiv%3Ddocument.querySelector('.ag-root.ag-unselectable.ag-layout-normal')%3Bif(!rootDiv)%7Balert('Could%20not%20find%20the%20root%20grid.')%3Breturn%20%7BallData%3A%5B%5D%2CgroupSize%3A1%2Cheaders%3A%5B%5D%7D%7Dconst%20headerSpans%3DrootDiv.querySelectorAll('span.headerName___23i5S')%3Bconst%20headers%3DArray.from(headerSpans).map(span%3D%3Espan.textContent.trim())%3Bconst%20groupSize%3Dheaders.length%7C%7C1%3Bconst%20allData%3D%5B%5D%3Bwhile(true)%7Bconst%20pageSnapshot%3DrootDiv.innerText%3Bconst%20pageData%3Dawait%20collectPageData(rootDiv)%3BallData.push(...pageData)%3Bconst%20nextButton%3Ddocument.querySelector('a%5Bdata-sumo-test%3D%22next-page-icon%22%5D')%3Bif(!nextButton%7C%7CnextButton.getAttribute('aria-disabled')%3D%3D%3D'true'%7C%7CnextButton.classList.contains('disabled'))%7Bbreak%7DnextButton.click()%3Btry%7Bawait%20waitForPageChange(pageSnapshot%2CrootDiv)%3Bawait%20waitForDomToSettle(rootDiv)%7Dcatch%7Bconsole.warn('Stopping%20pagination%20due%20to%20timeout.')%3Bbreak%7D%7Dreturn%20%7BallData%2CgroupSize%2Cheaders%7D%7Dfunction%20exportToCSV(data%2CgroupSize%2Cheaders)%7Bconst%20csvRows%3D%5Bheaders.map(h%3D%3E%60%22%24%7Bh.replace(/%22/g%2C'%22%22')%7D%22%60).join(',')%5D%3Bfor(let%20i%3D0%3Bi%3Cdata.length%3Bi%2B%3DgroupSize)%7Bconst%20row%3Ddata.slice(i%2Ci%2BgroupSize).map(item%3D%3E%60%22%24%7Bitem.replace(/%22/g%2C'%22%22')%7D%22%60)%3BcsvRows.push(row.join(','))%7Dconst%20csvContent%3DcsvRows.join('%5Cn')%3Bconst%20blob%3Dnew%20Blob(%5BcsvContent%5D%2C%7Btype%3A'text/csv'%7D)%3Bconst%20url%3DURL.createObjectURL(blob)%3Bconst%20link%3Ddocument.createElement('a')%3Blink.href%3Durl%3Blink.download%3D'paginated_export.csv'%3Blink.click()%3BURL.revokeObjectURL(url)%7Dtry%7Bconst%20%7BallData%2CgroupSize%2Cheaders%7D%3Dawait%20collectAllPagesData()%3Bif(allData.length%3D%3D%3D0)%7Balert('No%20data%20found%20to%20export.')%3Breturn%7DexportToCSV(allData%2CgroupSize%2Cheaders)%7Dcatch(e)%7Bconsole.error('Export%20failed%3A'%2Ce)%3Balert('Export%20failed.%20Check%20the%20console%20for%20details.')%7D%7D)()">
          Drag to Install Export
        </a>
      </div>

      <!-- Add Decode Button -->
      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title">‚ûï Add Decode Button</h2>
        <p class="bookmarklet-description">
          When viewing logs, you often encounter encoded text like Base64 or URL-encoded strings. This bookmarklet adds a "Decode" button to the page that instantly converts selected content into a human-readable format.
        </p>
        <a class="bookmarklet-button" href="javascript:(function(){const%20e%3D'floatingPromptButton'%3Bfunction%20t(e){const%20t%3D'initFields'%3Breturn%20e.match(/.{1%2C2}/g).map(e%3D%3EparseInt(e%2C16)).map(e%3D%3Et.split('').map(c%3D%3Ec.charCodeAt(0)).reduce((a%2Cb)%3D%3Ea%5Eb%2Ce)).map(c%3D%3EString.fromCharCode(c)).join('')}function%20n(e){try{return%20null!%3D%3DJSON.parse(e)%26%26'object'%3D%3Dtypeof%20JSON.parse(e)}catch{return!1}}function%20o(){document.querySelectorAll('div%5Bdata-cell-root%3D%22true%22%5D.cellContent___1IkPa.textRow___2UrUm.parsed___1xKPQ').forEach(e%3D%3E{const%20o%3De.textContent.trim()%3Btry{const%20r%3Dt(o)%3Bn(r)%26%26(e.textContent%3Dr%2Ce.style.display%3D'none'%2Ce.offsetHeight%2Ce.style.display%3D'')}catch(t){console.warn('Decode/JSON%20error:'%2Ct)}})}let%20r%3Ddocument.getElementById(e)%3Br%3F(r%3Dr.cloneNode(!0)%2Cr.replaceWith(r))%3A(r%3Ddocument.createElement('button')%2Cr.id%3De%2Cr.textContent%3D'Decode'%2Cdocument.body.appendChild(r))%2CObject.assign(r.style%2C{position:'fixed'%2Ctop:'10px'%2Cleft:'10px'%2CzIndex:9999%2Cpadding:'8px%2012px'%2CbackgroundColor:'#007bff'%2Ccolor:'white'%2Cborder:'none'%2CborderRadius:'5px'%2Ccursor:'pointer'%2CboxShadow:'0%202px%206px%20rgba(0%2C0%2C0%2C0.2)'})%2Cr.addEventListener('click'%2Co)%3B})()">
          Drag to Install Decode
        </a>
      </div>

      <!-- MC Hidden FFs -->
      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title">üïµÔ∏è MC Hidden Feature Flags Viewer</h2>
        <p class="bookmarklet-description">
          A tool for developers and power users. This reveals hidden Feature Flags from the Mission Control UI when you are on a certain company page, which is useful for testing unreleased features or understanding the specific configuration of your environment.
        </p>
        <a class="bookmarklet-button" href="javascript:(function()%7B(function()%20%7B%0A%0A%20%20%20%20%2F%2F%20---%20Configuration%20---%0A%20%20%20%20const%20API_BASE_URL%20%3D%20'https%3A%2F%2Fapi.backoffice.flywire.lol%2Fstaging%2Fclient-admin%2Fcompanies'%3B%0A%0A%20%20%20%20%2F%2F%20---%20State%20---%0A%20%20%20%20let%20bearerToken%20%3D%20null%3B%0A%20%20%20%20let%20companyId%20%3D%20null%3B%0A%20%20%20%20let%20originalFeaturesData%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20---%20Main%20Function%20to%20Initialize%20the%20Bookmarklet%20---%0A%20%20%20%20function%20init()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prevent%20adding%20the%20button%20multiple%20times%0A%20%20%20%20%20%20%20%20if%20(document.getElementById('ff-launcher-btn'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Feature%20Flag%20button%20already%20exists.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20main%20button%20to%20launch%20the%20feature%20flag%20modal%0A%20%20%20%20%20%20%20%20const%20launcherButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20%20%20%20%20launcherButton.id%20%3D%20'ff-launcher-btn'%3B%0A%20%20%20%20%20%20%20%20launcherButton.textContent%20%3D%20'Show%20Features'%3B%0A%20%20%20%20%20%20%20%20launcherButton.onclick%20%3D%20showFeaturesModal%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20styles%20to%20the%20launcher%20button%0A%20%20%20%20%20%20%20%20Object.assign(launcherButton.style%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20'fixed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20bottom%3A%20'20px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20right%3A%20'20px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zIndex%3A%20'9999'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%20'12px%2020px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20backgroundColor%3A%20'%23007bff'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20'white'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%20'none'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20borderRadius%3A%20'8px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20'pointer'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fontSize%3A%20'16px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20boxShadow%3A%20'0%204px%2012px%20rgba(0%2C%200%2C%200%2C%200.2)'%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20document.body.appendChild(launcherButton)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20---%20Core%20Logic%20---%0A%20%20%20%20async%20function%20showFeaturesModal()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%201.%20Get%20Company%20ID%20from%20URL%0A%20%20%20%20%20%20%20%20companyId%20%3D%20getCompanyIdFromUrl()%3B%0A%20%20%20%20%20%20%20%20if%20(!companyId)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Error%3A%20Could%20not%20find%20a%20Company%20ID%20in%20the%20URL.%20Please%20navigate%20to%20a%20company-specific%20page.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%202.%20Try%20to%20get%20Bearer%20Token%20automatically%2C%20fall%20back%20to%20prompt%0A%20%20%20%20%20%20%20%20let%20rawToken%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20tokenFromStorage%20%3D%20localStorage.getItem('oktaAccessToken')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(tokenFromStorage)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rawToken%20%3D%20tokenFromStorage%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Found%20Okta%20token%20automatically%20in%20localStorage.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Error%20reading%20token%20from%20localStorage.'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(!rawToken)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Could%20not%20find%20token%20automatically.%20Falling%20back%20to%20prompt.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rawToken%20%3D%20prompt('Please%20paste%20your%20Bearer%20Token%3A')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20token%20is%20still%20missing%20(e.g.%2C%20user%20cancelled%20prompt)%2C%20exit.%0A%20%20%20%20%20%20%20%20if%20(!rawToken)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Token%20entry%20cancelled.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20bearerToken%20for%20use%20in%20other%20functions%2C%20ensuring%20it%20has%20the%20'Bearer%20'%20prefix.%0A%20%20%20%20%20%20%20%20bearerToken%20%3D%20rawToken.toLowerCase().startsWith('bearer%20')%20%3F%20rawToken%20%3A%20%60Bearer%20%24%7BrawToken%7D%60%3B%0A%0A%0A%20%20%20%20%20%20%20%20%2F%2F%203.%20Fetch%20feature%20flags%0A%20%20%20%20%20%20%20%20showLoadingState()%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7BAPI_BASE_URL%7D%2F%24%7BcompanyId%7D%2Ffeatures%3Fsettings%3Dtrue%26includeHidden%3Dtrue%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'GET'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Authorization'%3A%20bearerToken%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20errorBody%20%3D%20await%20response.text()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60API%20Error%3A%20%24%7Bresponse.status%7D%20%24%7Bresponse.statusText%7D.%20Response%3A%20%24%7BerrorBody%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20originalFeaturesData%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20createAndShowModal(originalFeaturesData)%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%60Failed%20to%20fetch%20feature%20flags%3A%20%24%7Berror.message%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeModal()%3B%20%2F%2F%20Clean%20up%20loading%20state%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20function%20handleSaveChanges()%20%7B%0A%20%20%20%20%20%20%20%20const%20modalContent%20%3D%20document.getElementById('ff-modal-content')%3B%0A%20%20%20%20%20%20%20%20if%20(!modalContent%20%7C%7C%20!originalFeaturesData)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Error%3A%20Could%20not%20find%20data%20to%20save.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20updatedFeatures%20%3D%20JSON.parse(JSON.stringify(originalFeaturesData))%3B%20%2F%2F%20Deep%20copy%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Iterate%20over%20checkboxes%20to%20update%20the%20data%0A%20%20%20%20%20%20%20%20const%20checkboxes%20%3D%20modalContent.querySelectorAll('input%5Btype%3D%22checkbox%22%5D')%3B%0A%20%20%20%20%20%20%20%20checkboxes.forEach(checkbox%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20featureKey%20%3D%20checkbox.dataset.featureKey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(updatedFeatures%5BfeatureKey%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updatedFeatures%5BfeatureKey%5D.enabled%20%3D%20checkbox.checked%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Show%20a%20saving%20indicator%0A%20%20%20%20%20%20%20%20const%20saveButton%20%3D%20document.getElementById('ff-save-btn')%3B%0A%20%20%20%20%20%20%20%20saveButton.textContent%20%3D%20'Saving...'%3B%0A%20%20%20%20%20%20%20%20saveButton.disabled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7BAPI_BASE_URL%7D%2F%24%7BcompanyId%7D%2Ffeatures%3Fsettings%3Dtrue%26includeHidden%3Dtrue%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'PUT'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Authorization'%3A%20bearerToken%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(updatedFeatures)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20errorBody%20%3D%20await%20response.text()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60API%20Error%3A%20%24%7Bresponse.status%7D.%20%24%7BerrorBody%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Feature%20flags%20updated%20successfully!')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeModal()%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%60Failed%20to%20save%20changes%3A%20%24%7Berror.message%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20saveButton.textContent%20%3D%20'Save%20Changes'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20saveButton.disabled%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20---%20UI%20and%20Helper%20Functions%20---%0A%20%20%20%20function%20getCompanyIdFromUrl()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20to%20match%20against%20different%20possible%20URL%20structures%0A%20%20%20%20%20%20%20%20const%20path%20%3D%20window.location.pathname%3B%0A%20%20%20%20%20%20%20%20let%20match%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20pattern%3A%20%2Fcompanies%2F123%0A%20%20%20%20%20%20%20%20match%20%3D%20path.match(%2Fcompanies%5C%2F(%5Cd%2B)%2F)%3B%0A%20%20%20%20%20%20%20%20if%20(match)%20return%20match%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Second%20pattern%3A%20%2Faccounts%2Fcommercial%2F123%0A%20%20%20%20%20%20%20%20match%20%3D%20path.match(%2Faccounts%5C%2Fcommercial%5C%2F(%5Cd%2B)%2F)%3B%0A%20%20%20%20%20%20%20%20if%20(match)%20return%20match%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20null%20if%20no%20match%20is%20found%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20showLoadingState()%20%7B%0A%20%20%20%20%20%20%20%20removeModal()%3B%20%2F%2F%20Clean%20up%20any%20previous%20modal%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20createModalStructure('Loading%20Features...')%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(modal)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20createAndShowModal(features)%20%7B%0A%20%20%20%20%20%20%20%20removeModal()%3B%20%2F%2F%20Clean%20up%20loading%20modal%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20the%20list%20of%20features%20with%20checkboxes%2C%20filtering%20for%20hidden%20ones%0A%20%20%20%20%20%20%20%20const%20featureListHtml%20%3D%20Object.entries(features)%0A%20%20%20%20%20%20%20%20%20%20%20%20.filter((%5Bkey%2C%20value%5D)%20%3D%3E%20value.hidden%20%3D%3D%3D%20true)%20%2F%2F%20Only%20show%20hidden%20features%0A%20%20%20%20%20%20%20%20%20%20%20%20.sort((%5BkeyA%5D%2C%20%5BkeyB%5D)%20%3D%3E%20keyA.localeCompare(keyB))%20%2F%2F%20Sort%20alphabetically%0A%20%20%20%20%20%20%20%20%20%20%20%20.map((%5Bkey%2C%20value%5D)%20%3D%3E%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-feature-item%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22ff-check-%24%7Bkey%7D%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22checkbox%22%20id%3D%22ff-check-%24%7Bkey%7D%22%20data-feature-key%3D%22%24%7Bkey%7D%22%20%24%7Bvalue.enabled%20%3F%20'checked'%20%3A%20''%7D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22ff-feature-key%22%3E%24%7Bkey.replace(%2F_%2Fg%2C%20'%20')%7D%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Flabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%60).join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20modalContentHtml%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-feature-list%22%3E%24%7BfeatureListHtml%7D%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-modal-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22ff-cancel-btn%22%20class%3D%22ff-btn%20ff-btn-secondary%22%3ECancel%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22ff-save-btn%22%20class%3D%22ff-btn%20ff-btn-primary%22%3ESave%20Changes%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20createModalStructure(modalContentHtml%2C%20%60Hidden%20Features%20for%20Company%20%23%24%7BcompanyId%7D%60)%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(modal)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20event%20listeners%20for%20the%20new%20modal%20buttons%0A%20%20%20%20%20%20%20%20document.getElementById('ff-save-btn').onclick%20%3D%20handleSaveChanges%3B%0A%20%20%20%20%20%20%20%20document.getElementById('ff-cancel-btn').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%20%20%20%20document.getElementById('ff-modal-overlay').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%20%20%20%20document.querySelector('.ff-modal-close').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20createModalStructure(contentHtml%2C%20title%20%3D%20'')%20%7B%0A%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20overall%20container%20for%20the%20modal%0A%20%20%20%20%20%20%20%20const%20modalContainer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20modalContainer.id%20%3D%20'ff-modal-container'%3B%0A%0A%20%20%20%20%20%20%20%20const%20styles%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%23ff-modal-container%20*%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20box-sizing%3A%20border-box%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20font-family%3A%20-apple-system%2C%20BlinkMacSystemFont%2C%20%22Segoe%20UI%22%2C%20Roboto%2C%20Helvetica%2C%20Arial%2C%20sans-serif%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-overlay%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20fixed%3B%20top%3A%200%3B%20left%3A%200%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20rgba(0%2C%200%2C%200%2C%200.6)%3B%20z-index%3A%2010000%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20fixed%3B%20top%3A%2050%25%3B%20left%3A%2050%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translate(-50%25%2C%20-50%25)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20%23fff%3B%20border-radius%3A%2012px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20box-shadow%3A%200%205px%2020px%20rgba(0%2C0%2C0%2C0.3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20z-index%3A%2010001%3B%20width%3A%2090%25%3B%20max-width%3A%20500px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20max-height%3A%2080vh%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-header%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2016px%2024px%3B%20border-bottom%3A%201px%20solid%20%23e5e7eb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-title%20%7B%20font-size%3A%2020px%3B%20font-weight%3A%20600%3B%20color%3A%20%23111827%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-close%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20none%3B%20border%3A%20none%3B%20font-size%3A%2028px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20pointer%3B%20color%3A%20%236b7280%3B%20line-height%3A%201%3B%20padding%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2024px%3B%20overflow-y%3A%20auto%3B%20flex-grow%3A%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-modal-footer%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2016px%2024px%3B%20border-top%3A%201px%20solid%20%23e5e7eb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20flex%3B%20justify-content%3A%20flex-end%3B%20gap%3A%2012px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-feature-list%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20grid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20grid-template-columns%3A%201fr%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gap%3A%2016px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-feature-item%20label%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%2012px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2012px%3B%20border-radius%3A%208px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20%23f9fafb%3B%20border%3A%201px%20solid%20%23e5e7eb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20pointer%3B%20transition%3A%20background-color%200.2s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-feature-item%20label%3Ahover%20%7B%20background-color%3A%20%23f3f4f6%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-feature-item%20input%5Btype%3D%22checkbox%22%5D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%2018px%3B%20height%3A%2018px%3B%20accent-color%3A%20%23007bff%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-feature-key%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20%23374151%3B%20font-size%3A%2014px%3B%20text-transform%3A%20capitalize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2010px%2018px%3B%20border-radius%3A%208px%3B%20font-size%3A%2014px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20font-weight%3A%20600%3B%20cursor%3A%20pointer%3B%20border%3A%201px%20solid%20transparent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transition%3A%20background-color%200.2s%2C%20border-color%200.2s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn-primary%20%7B%20background-color%3A%20%23007bff%3B%20color%3A%20white%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn-primary%3Ahover%20%7B%20background-color%3A%20%230056b3%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn-primary%3Adisabled%20%7B%20background-color%3A%20%23a0c7ff%3B%20cursor%3A%20not-allowed%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn-secondary%20%7B%20background-color%3A%20%23e5e7eb%3B%20color%3A%20%23374151%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.ff-btn-secondary%3Ahover%20%7B%20background-color%3A%20%23d1d5db%3B%20%7D%0A%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20modalContainer.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstyle%3E%24%7Bstyles%7D%3C%2Fstyle%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-modal-overlay%22%20id%3D%22ff-modal-overlay%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-modal%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-modal-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class%3D%22ff-modal-title%22%3E%24%7Btitle%7D%3C%2Fh2%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22ff-modal-close%22%3E%26times%3B%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22ff-modal-content%22%20id%3D%22ff-modal-content%22%3E%24%7BcontentHtml%7D%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%60%3B%0A%20%20%20%20%20%20%20%20return%20modalContainer%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20removeModal()%20%7B%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20document.getElementById('ff-modal-container')%3B%0A%20%20%20%20%20%20%20%20if%20(modal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20modal.remove()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20---%20Execute%20the%20Main%20Function%20---%0A%20%20%20%20init()%3B%0A%0A%7D)()%3B%7D)()%3B">
          Drag to Install FF Viewer
        </a>
      </div>

      <!-- IATA Search -->
      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title">‚úàÔ∏è IATA Code Search</h2>
        <p class="bookmarklet-description">
          Use this bookmarklet on the page <a href="https://iata-info.flywire.com" target="abc">iata-info.flywire.com</a> and you will be able to search the IATA database; you will need VPN access. 
        </p>
        <a class="bookmarklet-button" href="javascript:(function()%7B(function() %7B%0A    %2F* --- Configuration --- *%2F%0A    const API_BASE_URL %3D &#x27;https%3A%2F%2Fiata-info.flywire.com%2Fiata-data&#x27;%3B%0A    const RESULTS_LIMIT %3D 25%3B%0A    %2F%2F INCLUDED_KEYS is no longer used for main table headers as they are now dynamic.%0A    %2F%2F We will specifically look for an &#x27;item.details&#x27; field.%0A%0A    %2F* --- State Variables --- *%2F%0A    let currentPage %3D 1%3B%0A    let totalResults %3D 0%3B%0A    let currentSearchTerm %3D &#x27;&#x27;%3B%0A%0A    %2F* --- DOM Elements --- *%2F%0A    let overlay%2C contentBox%2C searchInput%2C searchButton%2C resultsArea%2C closeButton%3B%0A    let paginationControls%2C prevButton%2C nextButton%2C rangeDisplay%3B%0A%0A    function createUI() %7B%0A        if (document.getElementById(&#x27;bookmarkletGridOverlay&#x27;)) return true%3B%0A        overlay %3D document.createElement(&#x27;div&#x27;)%3B%0A        overlay.id %3D &#x27;bookmarkletGridOverlay&#x27;%3B%0A        Object.assign(overlay.style%2C %7B position%3A &#x27;fixed&#x27;%2C top%3A &#x27;0&#x27;%2C left%3A &#x27;0&#x27;%2C width%3A &#x27;100%25&#x27;%2C height%3A &#x27;100%25&#x27;%2C backgroundColor%3A &#x27;rgba(0%2C0%2C0%2C0.7)&#x27;%2C zIndex%3A &#x27;99999&#x27; %7D)%3B%0A        contentBox %3D document.createElement(&#x27;div&#x27;)%3B%0A        Object.assign(contentBox.style%2C %7B backgroundColor%3A &#x27;%23fff&#x27;%2C width%3A &#x27;100%25&#x27;%2C height%3A &#x27;100%25&#x27;%2C padding%3A &#x27;15px&#x27;%2C boxSizing%3A &#x27;border-box&#x27;%2C overflow%3A &#x27;hidden&#x27;%2C position%3A &#x27;relative&#x27;%2C display%3A &#x27;flex&#x27;%2C flexDirection%3A &#x27;column&#x27; %7D)%3B%0A        const inputArea %3D document.createElement(&#x27;div&#x27;)%3B%0A        Object.assign(inputArea.style%2C %7B marginBottom%3A &#x27;15px&#x27;%2C display%3A &#x27;flex&#x27;%2C gap%3A &#x27;10px&#x27;%2C flexShrink%3A &#x27;0&#x27; %7D)%3B%0A        searchInput %3D document.createElement(&#x27;input&#x27;)%3B%0A        searchInput.type %3D &#x27;text&#x27;%3B%0A        searchInput.id %3D &#x27;bookmarkletSearchInput&#x27;%3B%0A        searchInput.placeholder %3D &#x27;Enter full-text search term&#x27;%3B%0A        Object.assign(searchInput.style%2C %7B padding%3A &#x27;10px&#x27;%2C border%3A &#x27;1px solid %23ccc&#x27;%2C borderRadius%3A &#x27;4px&#x27;%2C flexGrow%3A &#x27;1&#x27;%2C fontSize%3A &#x27;16px&#x27; %7D)%3B%0A        searchButton %3D document.createElement(&#x27;button&#x27;)%3B%0A        searchButton.textContent %3D &#x27;Search&#x27;%3B%0A        Object.assign(searchButton.style%2C %7B padding%3A &#x27;10px 18px&#x27;%2C backgroundColor%3A &#x27;%234CAF50&#x27;%2C color%3A &#x27;white&#x27;%2C border%3A &#x27;none&#x27;%2C borderRadius%3A &#x27;4px&#x27;%2C cursor%3A &#x27;pointer&#x27;%2C fontSize%3A &#x27;16px&#x27; %7D)%3B%0A        inputArea.appendChild(searchInput)%3B%0A        inputArea.appendChild(searchButton)%3B%0A        contentBox.appendChild(inputArea)%3B%0A        resultsArea %3D document.createElement(&#x27;div&#x27;)%3B%0A        resultsArea.id %3D &#x27;bookmarkletResultsArea&#x27;%3B%0A        Object.assign(resultsArea.style%2C %7B flexGrow%3A &#x27;1&#x27;%2C overflowY%3A &#x27;auto&#x27;%2C borderTop%3A &#x27;1px solid %23eee&#x27;%2C paddingTop%3A &#x27;15px&#x27;%2C marginBottom%3A &#x27;10px&#x27; %7D)%3B%0A        contentBox.appendChild(resultsArea)%3B%0A        paginationControls %3D document.createElement(&#x27;div&#x27;)%3B%0A        Object.assign(paginationControls.style%2C %7B display%3A &#x27;flex&#x27;%2C justifyContent%3A &#x27;space-between&#x27;%2C alignItems%3A &#x27;center&#x27;%2C padding%3A &#x27;10px 0&#x27;%2C borderTop%3A &#x27;1px solid %23eee&#x27;%2C flexShrink%3A &#x27;0&#x27; %7D)%3B%0A        prevButton %3D document.createElement(&#x27;button&#x27;)%3B%0A        prevButton.textContent %3D &#x27;Previous&#x27;%3B%0A        rangeDisplay %3D document.createElement(&#x27;span&#x27;)%3B%0A        rangeDisplay.textContent %3D &#x27;Showing 0-0 of 0&#x27;%3B%0A        Object.assign(rangeDisplay.style%2C %7B fontSize%3A &#x27;14px&#x27;%2C color%3A &#x27;%23333&#x27;%7D)%3B%0A        nextButton %3D document.createElement(&#x27;button&#x27;)%3B%0A        nextButton.textContent %3D &#x27;Next&#x27;%3B%0A        %5BprevButton%2C nextButton%5D.forEach(btn %3D&#x3E; %7B Object.assign(btn.style%2C %7B padding%3A &#x27;8px 16px&#x27;%2C backgroundColor%3A &#x27;%23007bff&#x27;%2C color%3A &#x27;white&#x27;%2C border%3A &#x27;none&#x27;%2C borderRadius%3A &#x27;4px&#x27;%2C cursor%3A &#x27;pointer&#x27; %7D)%3B btn.disabled %3D true%3B %7D)%3B%0A        paginationControls.appendChild(prevButton)%3B%0A        paginationControls.appendChild(rangeDisplay)%3B%0A        paginationControls.appendChild(nextButton)%3B%0A        contentBox.appendChild(paginationControls)%3B%0A        closeButton %3D document.createElement(&#x27;button&#x27;)%3B%0A        closeButton.textContent %3D &#x27;&#x2715;&#x27;%3B%0A        Object.assign(closeButton.style%2C %7B position%3A &#x27;absolute&#x27;%2C top%3A &#x27;15px&#x27;%2C right%3A &#x27;15px&#x27;%2C padding%3A &#x27;8px 12px&#x27;%2C backgroundColor%3A &#x27;%23f44336&#x27;%2C color%3A &#x27;white&#x27;%2C border%3A &#x27;none&#x27;%2C borderRadius%3A &#x27;50%25&#x27;%2C cursor%3A &#x27;pointer&#x27;%2C fontSize%3A &#x27;14px&#x27;%2C lineHeight%3A &#x27;1&#x27;%2C zIndex%3A &#x27;10&#x27; %7D)%3B%0A        contentBox.appendChild(closeButton)%3B%0A        overlay.appendChild(contentBox)%3B%0A        document.body.appendChild(overlay)%3B%0A        searchInput.focus()%3B%0A        searchButton.onclick %3D () %3D&#x3E; %7B currentSearchTerm %3D searchInput.value.trim()%3B if (currentSearchTerm.length %3D%3D%3D 0) %7B alert(&#x27;Please enter a search term.&#x27;)%3B searchInput.focus()%3B return%3B %7D currentPage %3D 1%3B performSearch(currentSearchTerm%2C currentPage)%3B %7D%3B%0A        searchInput.addEventListener(&#x27;keypress&#x27;%2C (event) %3D&#x3E; %7B if (event.key %3D%3D%3D &#x27;Enter&#x27;) searchButton.onclick()%3B %7D)%3B%0A        closeButton.onclick %3D () %3D&#x3E; %7B overlay.remove()%3B %7D%3B%0A        prevButton.onclick %3D () %3D&#x3E; %7B if (currentPage &#x3E; 1) %7B currentPage--%3B performSearch(currentSearchTerm%2C currentPage)%3B %7D %7D%3B%0A        nextButton.onclick %3D () %3D&#x3E; %7B performSearch(currentSearchTerm%2C currentPage %2B 1)%3B %7D%3B%0A    %7D%0A%0A    function updatePaginationUI(fetchedItemsCount) %7B%0A        const startItem %3D (currentPage - 1) * RESULTS_LIMIT %2B 1%3B%0A        const endItem %3D (currentPage - 1) * RESULTS_LIMIT %2B fetchedItemsCount%3B%0A        if (fetchedItemsCount %3D%3D%3D 0 %26%26 currentPage %3D%3D%3D 1) rangeDisplay.textContent %3D &#x22;No results&#x22;%3B%0A        else if (fetchedItemsCount %3D%3D%3D 0 %26%26 currentPage &#x3E; 1) rangeDisplay.textContent %3D %60Page %24%7BcurrentPage%7D (empty)%60%3B%0A        else if (totalResults &#x3E; 0) rangeDisplay.textContent %3D %60Showing %24%7BstartItem%7D-%24%7BendItem%7D of %24%7BtotalResults%7D%60%3B%0A        else rangeDisplay.textContent %3D %60Showing %24%7BstartItem%7D-%24%7BendItem%7D%60%3B%0A        prevButton.disabled %3D currentPage %3D%3D%3D 1%3B%0A        if (totalResults &#x3E; 0) nextButton.disabled %3D endItem &#x3E;%3D totalResults%3B%0A        else nextButton.disabled %3D fetchedItemsCount &#x3C; RESULTS_LIMIT%3B%0A    %7D%0A%0A    function performSearch(searchTerm%2C page) %7B%0A        if (!searchTerm %7C%7C searchTerm.length %3D%3D%3D 0) %7B resultsArea.innerHTML %3D &#x27;&#x3C;p&#x3E;Please enter a search term.&#x3C;%2Fp&#x3E;&#x27;%3B updatePaginationUI(0)%3B return%3B %7D%0A        const offset %3D (page - 1) * RESULTS_LIMIT%3B%0A        const fiqlQuery %3D %60fullText%3D%3D%24%7BsearchTerm%7D%60%3B%0A        const apiUrl %3D %60%24%7BAPI_BASE_URL%7D%3F_q%3D%24%7BencodeURIComponent(fiqlQuery)%7D%60%3B%0A        resultsArea.innerHTML %3D &#x27;&#x27;%3B%0A        const loadingMessage %3D document.createElement(&#x27;p&#x27;)%3B%0A        loadingMessage.textContent %3D %60Fetching page %24%7Bpage%7D...%60%3B%0A        resultsArea.appendChild(loadingMessage)%3B%0A        prevButton.disabled %3D true%3B nextButton.disabled %3D true%3B%0A        fetch(apiUrl%2C %7B method%3A &#x27;GET&#x27;%2C headers%3A %7B &#x27;Range&#x27;%3A %60entities%3D%24%7Boffset%7D-%24%7Boffset %2B RESULTS_LIMIT - 1%7D%60 %7D %7D)%0A        .then(response %3D&#x3E; %7B%0A            if (!response.ok) throw new Error(%60HTTP error! status%3A %24%7Bresponse.status%7D - %24%7Bresponse.statusText%7D%60)%3B%0A            const contentRange %3D response.headers.get(&#x27;Content-Range&#x27;)%3B%0A            const xTotalCount %3D response.headers.get(&#x27;X-Total-Count&#x27;)%3B%0A            if (xTotalCount) totalResults %3D parseInt(xTotalCount%2C 10)%3B%0A            else if (contentRange) %7B const match %3D contentRange.match(%2F%5C%2F(%5Cd%2B%7C%5C*)%2F)%3B if (match %26%26 match%5B1%5D !%3D%3D &#x27;*&#x27;) totalResults %3D parseInt(match%5B1%5D%2C 10)%3B else totalResults %3D 0%3B %7D%0A            else totalResults %3D 0%3B%0A            return response.json()%3B%0A        %7D)%0A        .then(data %3D&#x3E; %7B%0A            resultsArea.innerHTML %3D &#x27;&#x27;%3B currentPage %3D page%3B%0A            if (!data %7C%7C (Array.isArray(data) %26%26 data.length %3D%3D%3D 0)) %7B%0A                if (currentPage %3D%3D%3D 1) resultsArea.innerHTML %3D &#x27;&#x3C;p&#x3E;No results found or data is empty.&#x3C;%2Fp&#x3E;&#x27;%3B%0A                else resultsArea.innerHTML %3D %60&#x3C;p&#x3E;No more results on page %24%7BcurrentPage%7D.&#x3C;%2Fp&#x3E;%60%3B%0A                updatePaginationUI(0)%3B return%3B%0A            %7D%0A            const resultsArray %3D Array.isArray(data) %3F data %3A (data.items %7C%7C (typeof data %3D%3D%3D &#x27;object&#x27; %26%26 data !%3D%3D null %3F %5Bdata%5D %3A %5B%5D))%3B%0A            const fetchedItemsCount %3D resultsArray.length%3B%0A            if (fetchedItemsCount %3D%3D%3D 0 %26%26 currentPage %3D%3D%3D 1) %7B resultsArea.innerHTML %3D &#x27;&#x3C;p&#x3E;No results found.&#x3C;%2Fp&#x3E;&#x27;%3B updatePaginationUI(0)%3B return%3B %7D%0A%0A            %2F%2F --- New logic for dynamic grid from &#x22;details&#x22; JSON ---%0A            const allJsonKeys %3D new Set()%3B%0A            const itemDetailsCache %3D %5B%5D%3B %2F%2F To store parsed JSON from &#x22;details&#x22; or null%0A%0A            resultsArray.forEach(item %3D&#x3E; %7B%0A                %2F%2F Assuming the field containing JSON is always named &#x27;details&#x27;%0A                %2F%2F You might need to adjust &#x27;item.details&#x27; if the field name can vary%0A                let detailsValue %3D item.details%3B %0A                let parsedJson %3D null%3B%0A                if (typeof detailsValue %3D%3D%3D &#x27;string&#x27;) %7B%0A                    try %7B%0A                        const parsed %3D JSON.parse(detailsValue)%3B%0A                        %2F%2F We only want to collect keys from non-array objects%0A                        if (typeof parsed %3D%3D%3D &#x27;object&#x27; %26%26 parsed !%3D%3D null %26%26 !Array.isArray(parsed)) %7B%0A                            parsedJson %3D parsed%3B%0A                        %7D%0A                    %7D catch (e) %7B %2F* failed to parse%2C parsedJson remains null *%2F %7D%0A                %7D else if (typeof detailsValue %3D%3D%3D &#x27;object&#x27; %26%26 detailsValue !%3D%3D null %26%26 !Array.isArray(detailsValue)) %7B%0A                    parsedJson %3D detailsValue%3B %2F%2F Already a suitable object%0A                %7D%0A%0A                if (parsedJson) %7B%0A                    Object.keys(parsedJson).forEach(key %3D&#x3E; allJsonKeys.add(key))%3B%0A                %7D%0A                itemDetailsCache.push(parsedJson)%3B %2F%2F Store parsed object or null%0A            %7D)%3B%0A%0A            const dynamicHeaders %3D Array.from(allJsonKeys).sort()%3B %2F%2F Sort headers alphabetically%0A%0A            if (dynamicHeaders.length %3D%3D%3D 0) %7B%0A                resultsArea.innerHTML %3D &#x22;&#x3C;p&#x3E;No parsable &#x27;details&#x27; object content found in results to create a dynamic grid.&#x3C;%2Fp&#x3E;&#x22;%3B%0A                if (fetchedItemsCount &#x3E; 0 %26%26 !resultsArray.some(item %3D&#x3E; item.details %26%26 (typeof item.details %3D%3D%3D &#x27;object&#x27; %7C%7C typeof item.details %3D%3D%3D &#x27;string&#x27;))) %7B%0A                     resultsArea.innerHTML %3D &#x22;&#x3C;p&#x3E;Results found%2C but no &#x27;details&#x27; field present or &#x27;details&#x27; field is not an object%2FJSON string.&#x3C;%2Fp&#x3E;&#x22;%3B%0A                %7D else if (fetchedItemsCount &#x3E; 0) %7B%0A                    resultsArea.innerHTML %3D &#x22;&#x3C;p&#x3E;Results found%2C but &#x27;details&#x27; fields did not contain parsable non-array JSON objects with keys.&#x3C;%2Fp&#x3E;&#x22;%3B%0A                %7D%0A                updatePaginationUI(fetchedItemsCount)%3B%0A                return%3B%0A            %7D%0A%0A            const table %3D document.createElement(&#x27;table&#x27;)%3B%0A            Object.assign(table.style%2C %7B width%3A &#x27;100%25&#x27;%2C borderCollapse%3A &#x27;collapse&#x27;%2C tableLayout%3A &#x27;auto&#x27; %7D)%3B%0A            const thead %3D table.createTHead()%3B%0A            const headerRow %3D thead.insertRow()%3B%0A%0A            dynamicHeaders.forEach(headerText %3D&#x3E; %7B%0A                const th %3D document.createElement(&#x27;th&#x27;)%3B%0A                th.textContent %3D headerText%3B%0A                Object.assign(th.style%2C %7B border%3A &#x27;1px solid %23ddd&#x27;%2C padding%3A &#x27;10px&#x27;%2C backgroundColor%3A &#x27;%23f8f8f8&#x27;%2C textAlign%3A &#x27;left&#x27;%2C fontWeight%3A &#x27;600&#x27; %7D)%3B%0A                headerRow.appendChild(th)%3B%0A            %7D)%3B%0A%0A            const tbody %3D table.createTBody()%3B%0A            function escapeRegExp(string) %7B return string.replace(%2F%5B.*%2B%3F%5E%24%7B%7D()%7C%5B%5C%5D%5C%5C%5D%2Fg%2C &#x27;%5C%5C%24%26&#x27;)%3B %7D%0A            const escapedSearchTermForRegex %3D currentSearchTerm.length &#x3E; 0 %3F escapeRegExp(currentSearchTerm) %3A null%3B%0A            const highlightRegex %3D escapedSearchTermForRegex %3F new RegExp(escapedSearchTermForRegex%2C &#x27;gi&#x27;) %3A null%3B%0A%0A            resultsArray.forEach((_item%2C index) %3D&#x3E; %7B %2F%2F Iterate original results to create rows%0A                const row %3D tbody.insertRow()%3B%0A                row.style.borderBottom %3D &#x27;1px solid %23eee&#x27;%3B%0A                const currentItemParsedDetails %3D itemDetailsCache%5Bindex%5D%3B%0A%0A                dynamicHeaders.forEach(headerKey %3D&#x3E; %7B%0A                    const cell %3D row.insertCell()%3B%0A                    Object.assign(cell.style%2C %7B padding%3A &#x27;10px&#x27;%2C verticalAlign%3A &#x27;top&#x27;%2C wordWrap%3A &#x27;break-word&#x27;%2C borderLeft%3A &#x27;1px solid %23eee&#x27;%2C borderRight%3A &#x27;1px solid %23eee&#x27; %7D)%3B%0A                     if (index %3D%3D%3D 0) cell.style.borderTop %3D &#x27;1px solid %23eee&#x27;%3B %2F%2F Add top border for cells in first data row%0A%0A                    let valueToDisplay %3D null%3B%0A                    if (currentItemParsedDetails %26%26 Object.prototype.hasOwnProperty.call(currentItemParsedDetails%2C headerKey)) %7B%0A                        valueToDisplay %3D currentItemParsedDetails%5BheaderKey%5D%3B%0A                    %7D%0A%0A                    if (valueToDisplay %3D%3D%3D null %7C%7C valueToDisplay %3D%3D%3D undefined) %7B%0A                        cell.innerHTML %3D &#x27;%26nbsp%3B&#x27;%3B %2F%2F Non-breaking space for empty cells for better border rendering%0A                    %7D else if (typeof valueToDisplay %3D%3D%3D &#x27;object&#x27;) %7B %2F%2F Nested object or array%0A                        const pre %3D document.createElement(&#x27;pre&#x27;)%3B%0A                        Object.assign(pre.style%2C %7B margin%3A &#x27;0&#x27;%2C whiteSpace%3A &#x27;pre-wrap&#x27;%2C wordBreak%3A &#x27;break-all&#x27;%2C fontSize%3A &#x27;12px&#x27;%2C padding%3A &#x27;2px&#x27;%2C backgroundColor%3A &#x27;%23fdfdfd&#x27; %7D)%3B%0A                        pre.textContent %3D JSON.stringify(valueToDisplay%2C null%2C 2)%3B%0A                        cell.appendChild(pre)%3B%0A                    %7D else %7B%0A                        const valStr %3D String(valueToDisplay)%3B%0A                        if (highlightRegex %26%26 valStr.match(highlightRegex)) %7B%0A                            cell.innerHTML %3D valStr.replace(highlightRegex%2C match %3D&#x3E; %60&#x3C;mark style%3D&#x22;background-color%3A yellow%3B color%3A black%3B&#x22;&#x3E;%24%7Bmatch%7D&#x3C;%2Fmark&#x3E;%60)%3B%0A                        %7D else %7B%0A                            cell.textContent %3D valStr%3B%0A                        %7D%0A                    %7D%0A                %7D)%3B%0A            %7D)%3B%0A            resultsArea.appendChild(table)%3B%0A            %2F%2F --- End of new dynamic grid logic ---%0A            updatePaginationUI(fetchedItemsCount)%3B%0A        %7D)%0A        .catch(error %3D&#x3E; %7B%0A            console.error(&#x27;Bookmarklet Error%3A&#x27;%2C error)%3B%0A            resultsArea.innerHTML %3D %60&#x3C;p style%3D&#x22;color%3A red%3B&#x22;&#x3E;Error%3A %24%7Berror.message%7D. Check console.&#x3C;%2Fp&#x3E;%60%3B%0A            updatePaginationUI(0)%3B%0A        %7D)%3B%0A    %7D%0A    createUI()%3B%0A%7D)()%3B%7D)()%3B">
          Drag to Install IATA Search
        </a>
      </div>
  
      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title"> Bearer token copier </h2>
        <p class="bookmarklet-description">
          Use this bookmarklet on MC the page to add a button that copies to the clipboard the current bearer token. 
        </p>
          
        <a class="bookmarklet-button" href="javascript:(function()%7B(function()%20%7B%0A%20%20%20%20%2F%2F%20This%20function%20creates%20and%20styles%20the%20button%20that%20will%20be%20added%20to%20the%20page.%0A%20%20%20%20function%20init()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20button%20already%20exists%20to%20avoid%20creating%20duplicates.%0A%20%20%20%20%20%20%20%20if%20(document.getElementById('copy-bearer-btn'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Copy%20bearer%20token%20button%20already%20exists.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20button%20element.%0A%20%20%20%20%20%20%20%20const%20copyButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20%20%20%20%20copyButton.id%20%3D%20'copy-bearer-btn'%3B%0A%20%20%20%20%20%20%20%20copyButton.textContent%20%3D%20'Copy%20Bearer%20Token%20Into%20Clipboard'%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Assign%20the%20core%20copy%20function%20to%20the%20button's%20click%20event.%0A%20%20%20%20%20%20%20%20copyButton.onclick%20%3D%20copyTokenFromLocalStorage%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20styles%20to%20make%20the%20button%20visible%20and%20well-placed.%0A%20%20%20%20%20%20%20%20Object.assign(copyButton.style%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20'fixed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20bottom%3A%20'20px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20right%3A%20'20px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zIndex%3A%20'9999'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%20'12px%2020px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20backgroundColor%3A%20'%23007bff'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20'white'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%20'none'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20borderRadius%3A%20'8px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20'pointer'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fontSize%3A%20'16px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20boxShadow%3A%20'0%204px%2012px%20rgba(0%2C%200%2C%200%2C%200.2)'%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20the%20button%20to%20the%20page.%0A%20%20%20%20%20%20%20%20document.body.appendChild(copyButton)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20This%20is%20the%20main%20function%20that%20handles%20the%20copy%20logic.%0A%20%20%20%20function%20copyTokenFromLocalStorage()%20%7B%0A%20%20%20%20%20%20%20%20const%20button%20%3D%20document.getElementById('copy-bearer-btn')%3B%0A%20%20%20%20%20%20%20%20let%20tokenValue%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Safely%20try%20to%20get%20the%20token%20from%20localStorage.%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tokenValue%20%3D%20localStorage.getItem('oktaAccessToken')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!tokenValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert('Could%20not%20find%20%22oktaAccessToken%22%20in%20localStorage.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Error%20accessing%20localStorage.%20See%20console%20for%20details.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Error%20reading%20from%20localStorage%3A'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20a%20temporary%20textarea%20element%20to%20hold%20the%20token%20value%20for%20copying.%0A%20%20%20%20%20%20%20%20const%20tempTextArea%20%3D%20document.createElement('textarea')%3B%0A%20%20%20%20%20%20%20%20tempTextArea.style.position%20%3D%20'absolute'%3B%0A%20%20%20%20%20%20%20%20tempTextArea.style.left%20%3D%20'-9999px'%3B%20%2F%2F%20Hide%20it%20off-screen.%0A%20%20%20%20%20%20%20%20tempTextArea.value%20%3D%20tokenValue%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(tempTextArea)%3B%0A%20%20%20%20%20%20%20%20tempTextArea.select()%3B%20%2F%2F%20Select%20the%20text.%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20copy%20the%20selected%20text%20to%20the%20clipboard.%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.execCommand('copy')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Token%20copied%20successfully!')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Provide%20visual%20feedback%20to%20the%20user%20on%20the%20button.%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(button)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20button.textContent%20%3D%20'Copied!'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20button.textContent%20%3D%20'Copy%20Bearer%20Token%20Into%20Clipboard'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%202000)%3B%20%2F%2F%20Reset%20the%20button%20text%20after%202%20seconds.%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Failed%20to%20copy%20token%3A'%2C%20err)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Failed%20to%20copy%20token.%20See%20console%20for%20details.')%3B%0A%20%20%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20by%20removing%20the%20temporary%20textarea.%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.removeChild(tempTextArea)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Run%20the%20script.%0A%20%20%20%20init()%3B%0A%7D)()%3B%7D)()%3B">
          Drag to Install Copy MC Bearer Token
        </a>
    </div>

      <div class="bookmarklet-card">
        <h2 class="bookmarklet-title"> Bene Status Change </h2>
        <p class="bookmarklet-description">
          Use this bookmarklet on MC bene-admin/bene edit page to change the status. 
        </p>
        <a class="bookmarklet-button" href="javascript:(function()%7B(function()%20%7B%0A%0A%20%20%20%20%2F%2F%20---%20State%20%26%20Configuration%20---%0A%20%20%20%20let%20bearerToken%20%3D%20null%3B%0A%20%20%20%20let%20beneficiaryRef%20%3D%20null%3B%0A%20%20%20%20let%20apiHost%20%3D%20null%3B%0A%20%20%20%20let%20envPath%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20---%20Main%20Function%20to%20Initialize%20the%20Bookmarklet%20---%0A%20%20%20%20function%20init()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prevent%20adding%20the%20button%20multiple%20times%0A%20%20%20%20%20%20%20%20if%20(document.getElementById('bs-launcher-btn'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Beneficiary%20Status%20button%20already%20exists.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20main%20button%20to%20launch%20the%20status%20modal%0A%20%20%20%20%20%20%20%20const%20launcherButton%20%3D%20document.createElement('button')%3B%0A%20%20%20%20%20%20%20%20launcherButton.id%20%3D%20'bs-launcher-btn'%3B%0A%20%20%20%20%20%20%20%20launcherButton.textContent%20%3D%20'Set%20Status'%3B%0A%20%20%20%20%20%20%20%20launcherButton.onclick%20%3D%20showStatusModal%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20styles%20to%20the%20launcher%20button%0A%20%20%20%20%20%20%20%20Object.assign(launcherButton.style%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20'fixed'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20bottom%3A%20'80px'%2C%20%2F%2F%20Positioned%20higher%20to%20avoid%20overlap%20with%20other%20bookmarklets%0A%20%20%20%20%20%20%20%20%20%20%20%20right%3A%20'20px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zIndex%3A%20'9998'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%20'12px%2020px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20backgroundColor%3A%20'%23ffc107'%2C%20%2F%2F%20Amber%20color%20for%20setting%20status%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20'black'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%20'none'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20borderRadius%3A%20'8px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20'pointer'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fontSize%3A%20'16px'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20boxShadow%3A%20'0%204px%2012px%20rgba(0%2C%200%2C%200%2C%200.2)'%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20document.body.appendChild(launcherButton)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20---%20Core%20Logic%20---%0A%20%20%20%20async%20function%20showStatusModal()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%201.%20Get%20required%20info%20from%20URL%20and%20environment%0A%20%20%20%20%20%20%20%20beneficiaryRef%20%3D%20getBeneficiaryRefFromUrl()%3B%0A%20%20%20%20%20%20%20%20if%20(!beneficiaryRef)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Error%3A%20Could%20not%20find%20a%20Beneficiary%20Reference%20in%20the%20URL.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20apiHost%20%3D%20getApiHost()%3B%0A%20%20%20%20%20%20%20%20if%20(!apiHost)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('Error%3A%20Could%20not%20determine%20the%20API%20environment%20from%20the%20current%20URL.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20envPath%20%3D%20window.location.hostname.includes('flywire.lol')%20%3F%20'staging'%20%3A%20'prod'%3B%0A%20%20%20%20%20%20%20%20const%20apiUrl%20%3D%20%60https%3A%2F%2F%24%7BapiHost%7D%2F%24%7BenvPath%7D%2Fclient-admin%2Fpayables%2Fbeneficiaries%2F%24%7BbeneficiaryRef%7D%60%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%202.%20Get%20Bearer%20Token%0A%20%20%20%20%20%20%20%20let%20rawToken%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20rawToken%20%3D%20localStorage.getItem('oktaAccessToken')%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Error%20reading%20token%20from%20localStorage.'%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(!rawToken)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20rawToken%20%3D%20prompt('Could%20not%20find%20token%20automatically.%20Please%20paste%20your%20Bearer%20Token%3A')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(!rawToken)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('Token%20entry%20cancelled.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20bearerToken%20%3D%20rawToken.toLowerCase().startsWith('bearer%20')%20%3F%20rawToken%20%3A%20%60Bearer%20%24%7BrawToken%7D%60%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%203.%20Fetch%20current%20status%0A%20%20%20%20%20%20%20%20showLoadingState()%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(apiUrl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'GET'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Authorization'%3A%20bearerToken%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20errorBody%20%3D%20await%20response.text()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60API%20GET%20Error%3A%20%24%7Bresponse.status%7D.%20%24%7BerrorBody%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20data%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20createAndShowModal(data.status)%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%60Failed%20to%20fetch%20beneficiary%20status%3A%20%24%7Berror.message%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeModal()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20function%20handleSaveChanges()%20%7B%0A%20%20%20%20%20%20%20%20const%20statusSelector%20%3D%20document.getElementById('bs-status-selector')%3B%0A%20%20%20%20%20%20%20%20const%20newStatus%20%3D%20statusSelector.value%3B%0A%0A%20%20%20%20%20%20%20%20const%20apiUrl%20%3D%20%60https%3A%2F%2F%24%7BapiHost%7D%2F%24%7BenvPath%7D%2Fclient-admin%2Fpayables%2Fbeneficiaries%2F%24%7BbeneficiaryRef%7D%60%3B%0A%20%20%20%20%20%20%20%20const%20requestBody%20%3D%20%7B%20status%3A%20newStatus%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20saveButton%20%3D%20document.getElementById('bs-save-btn')%3B%0A%20%20%20%20%20%20%20%20saveButton.textContent%20%3D%20'Saving...'%3B%0A%20%20%20%20%20%20%20%20saveButton.disabled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(apiUrl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'PATCH'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Authorization'%3A%20bearerToken%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fjson'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(requestBody)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20errorBody%20%3D%20await%20response.text()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60API%20PATCH%20Error%3A%20%24%7Bresponse.status%7D.%20%24%7BerrorBody%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%60Beneficiary%20status%20updated%20to%20%22%24%7BnewStatus%7D%22%20successfully!%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.location.reload()%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(%60Failed%20to%20update%20status%3A%20%24%7Berror.message%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20saveButton.textContent%20%3D%20'Save%20Changes'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20saveButton.disabled%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20---%20UI%20and%20Helper%20Functions%20---%0A%20%20%20%20function%20showLoadingState()%20%7B%0A%20%20%20%20%20%20%20%20removeModal()%3B%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20createModalStructure('Loading%20current%20status...')%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(modal)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20createAndShowModal(currentStatus)%20%7B%0A%20%20%20%20%20%20%20%20removeModal()%3B%0A%20%20%20%20%20%20%20%20const%20options%20%3D%20%5B%22draft%22%2C%20%22approved%22%5D%3B%0A%20%20%20%20%20%20%20%20const%20selectHtml%20%3D%20options.map(opt%20%3D%3E%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%3Coption%20value%3D%22%24%7Bopt%7D%22%20%24%7Bopt%20%3D%3D%3D%20currentStatus%20%3F%20'selected'%20%3A%20''%7D%3E%24%7Bopt.charAt(0).toUpperCase()%20%2B%20opt.slice(1)%7D%3C%2Foption%3E%60%0A%20%20%20%20%20%20%20%20).join('')%3B%0A%0A%20%20%20%20%20%20%20%20const%20contentHtml%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-status-display%22%3ECurrent%20Status%3A%20%3Cstrong%3E%24%7BcurrentStatus%7D%3C%2Fstrong%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-status-selector-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22bs-status-selector%22%3ENew%20Status%3A%3C%2Flabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cselect%20id%3D%22bs-status-selector%22%3E%24%7BselectHtml%7D%3C%2Fselect%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-modal-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22bs-cancel-btn%22%20class%3D%22bs-btn%20bs-btn-secondary%22%3ECancel%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22bs-save-btn%22%20class%3D%22bs-btn%20bs-btn-primary%22%3ESave%20Changes%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20createModalStructure(contentHtml%2C%20'Set%20Beneficiary%20Status')%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(modal)%3B%0A%0A%20%20%20%20%20%20%20%20document.getElementById('bs-save-btn').onclick%20%3D%20handleSaveChanges%3B%0A%20%20%20%20%20%20%20%20document.getElementById('bs-cancel-btn').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%20%20%20%20document.getElementById('bs-modal-overlay').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%20%20%20%20document.querySelector('.bs-modal-close').onclick%20%3D%20removeModal%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20createModalStructure(contentHtml%2C%20title%20%3D%20'')%20%7B%0A%20%20%20%20%20%20%20%20const%20modalContainer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20modalContainer.id%20%3D%20'bs-modal-container'%3B%0A%0A%20%20%20%20%20%20%20%20const%20styles%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%23bs-modal-container%20*%20%7B%20box-sizing%3A%20border-box%3B%20font-family%3A%20sans-serif%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-overlay%20%7B%20position%3A%20fixed%3B%20top%3A%200%3B%20left%3A%200%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20background%3A%20rgba(0%2C0%2C0%2C0.6)%3B%20z-index%3A%2010000%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal%20%7B%20position%3A%20fixed%3B%20top%3A%2050%25%3B%20left%3A%2050%25%3B%20transform%3A%20translate(-50%25%2C%20-50%25)%3B%20background%3A%20%23fff%3B%20border-radius%3A%208px%3B%20z-index%3A%2010001%3B%20width%3A%2090%25%3B%20max-width%3A%20400px%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-header%20%7B%20padding%3A%2016px%3B%20border-bottom%3A%201px%20solid%20%23e5e7eb%3B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-title%20%7B%20font-size%3A%2018px%3B%20font-weight%3A%20600%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-close%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20font-size%3A%2024px%3B%20cursor%3A%20pointer%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-content%20%7B%20padding%3A%2020px%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-modal-footer%20%7B%20padding%3A%2016px%3B%20border-top%3A%201px%20solid%20%23e5e7eb%3B%20display%3A%20flex%3B%20justify-content%3A%20flex-end%3B%20gap%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-status-display%20%7B%20margin-bottom%3A%2016px%3B%20font-size%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-status-selector-container%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20gap%3A%208px%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-status-selector-container%20label%20%7B%20font-weight%3A%20600%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-status-selector-container%20select%20%7B%20padding%3A%208px%3B%20font-size%3A%2016px%3B%20border-radius%3A%204px%3B%20border%3A%201px%20solid%20%23ccc%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-btn%20%7B%20padding%3A%2010px%2016px%3B%20border-radius%3A%206px%3B%20font-size%3A%2014px%3B%20font-weight%3A%20600%3B%20cursor%3A%20pointer%3B%20border%3A%201px%20solid%20transparent%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-btn-primary%20%7B%20background-color%3A%20%23007bff%3B%20color%3A%20white%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-btn-primary%3Adisabled%20%7B%20background-color%3A%20%23a0c7ff%3B%20cursor%3A%20not-allowed%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20.bs-btn-secondary%20%7B%20background-color%3A%20%23e5e7eb%3B%20color%3A%20%23374151%3B%20%7D%0A%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20modalContainer.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstyle%3E%24%7Bstyles%7D%3C%2Fstyle%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-modal-overlay%22%20id%3D%22bs-modal-overlay%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-modal%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-modal-header%22%3E%3Ch2%20class%3D%22bs-modal-title%22%3E%24%7Btitle%7D%3C%2Fh2%3E%3Cbutton%20class%3D%22bs-modal-close%22%3E%26times%3B%3C%2Fbutton%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22bs-modal-content%22%3E%24%7BcontentHtml%7D%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%60%3B%0A%20%20%20%20%20%20%20%20return%20modalContainer%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20removeModal()%20%7B%0A%20%20%20%20%20%20%20%20const%20modal%20%3D%20document.getElementById('bs-modal-container')%3B%0A%20%20%20%20%20%20%20%20if%20(modal)%20modal.remove()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20getBeneficiaryRefFromUrl()%20%7B%0A%20%20%20%20%20%20%20%20const%20match%20%3D%20window.location.pathname.match(%2Fbene-admin%5C%2Fedit%5C%2F(%5Ba-zA-Z0-9%5D%2B)%2F)%3B%0A%20%20%20%20%20%20%20%20return%20match%20%3F%20match%5B1%5D%20%3A%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20getApiHost()%20%7B%0A%20%20%20%20%20%20%20%20const%20hostname%20%3D%20window.location.hostname%3B%0A%20%20%20%20%20%20%20%20if%20(hostname.includes('demo.flywire.com'))%20return%20'api.backoffice.demo.flywire.com'%3B%0A%20%20%20%20%20%20%20%20if%20(hostname.includes('flywire.lol'))%20return%20'api.backoffice.flywire.lol'%3B%0A%20%20%20%20%20%20%20%20if%20(hostname.includes('flywire.com'))%20return%20'api.backoffice.flywire.com'%3B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20init()%3B%0A%0A%7D)()%3B%7D)()%3B">
          Drag to Install Bene Status Change
        </a>
      </div>
  </body>
</html>
